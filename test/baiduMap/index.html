<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>地图</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=pSsBbYZm0j0z6uVEKSctbKRo"></script>
    <!-- <script type="text/javascript" src="http://developer.baidu.com/map/jsdemo/demo/convertor.js"></script> -->
</head>
<body>
    <div id="map" style="height:320px"></div>
    <script type="text/javascript" src="../../static/jquery-3.1.1.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript">
    // function initialize() {
    //   var mp = new BMap.Map('map');
    //   mp.centerAndZoom(new BMap.Point(121.491, 31.233), 11);
    // }

    // window.onload = initialize;
    //GPS坐标
    // var xx = 117.126575995835;
    // var yy = 36.6702207308909;
    // var gpsPoint = new BMap.Point(xx,yy);

    // //地图初始化
    // var bm = new BMap.Map("map");
    // bm.centerAndZoom(gpsPoint, 15);
    // bm.enableScrollWheelZoom();//滚轮放大缩小
    // bm.addControl(new BMap.NavigationControl());

    // //添加谷歌marker和label
    // var markergps = new BMap.Marker(gpsPoint);
    // bm.addOverlay(markergps); //添加GPS标注
    // var label = new BMap.Label("我是GPS标注哦",{offset:new BMap.Size(20,-10)});
    // markergps.setLabel(label); //添加GPS标注

    // //坐标转换完之后的回调函数
    // translateCallback = function (point){
    //     var marker = new BMap.Marker(point);
    //     bm.addOverlay(marker);
    //     var label = new BMap.Label("我是百度标注哦",{offset:new BMap.Size(20,-10)});
    //     marker.setLabel(label); //添加百度label
    //     bm.setCenter(point);
    //     console.log("转化为百度坐标为："+point.lng + "," + point.lat);
    // }

    // setTimeout(function(){
    //     BMap.Convertor.translate(gpsPoint,0,translateCallback);     //真实经纬度转成百度坐标
    // }, 2000);

    // var pointArrs=[];
    // var markerArrs = [];
    // setTimeout(function(){
    //     var json = [{
    //         xx:117.5800,
    //         yy:36.6702207308909
    //     },{
    //         xx:117.5850,
    //         yy:36.6702207308909
    //     },{
    //         xx:117.5900,
    //         yy:36.6702209308909
    //     },{
    //         xx:117.5950,
    //         yy:36.6682207308909
    //     },{
    //         xx:117.6000,
    //         yy:36.6752200308909
    //     },{
    //         xx:117.6050,
    //         yy:36.6702207308909
    //     }];

    //     // for (var i = 0; i < json.length; i++) {
    //     //     var point = new BMap.Point(json[i].xx, json[i].yy);
    //     //     var marker = new BMap.Marker(point);
    //     //     pointArrs.push(point);
    //     //     markerArrs.push(marker);
    //     // }
    //     // bm.setCenter(pointArrs[0]);
    //     // setTimeout(function(){
    //     //     var line = new BMap.Polyline(pointArrs, {
    //     //         strokeColor: "black",
    //     //         strokeWeight: 4,
    //     //         enableMassClear: false,
    //     //         strokeOpacity: 0.7
    //     //     }); //创建弧线对象
    //     //     bm.addOverlay(line); // 将标注添加到地图中
    //     // },2000);
    //     $.ajax({
    //         url: '//localhost:8989/api/response',
    //         dataType: 'json'
    //     })
    //     .done(function(res) {
    //         console.log("success");
    //         console.log(res);
    //         for (var i = 0; i < res.length; i++) {
    //             var point = new BMap.Point(res[i].xx, res[i].yy);
    //             var marker = new BMap.Marker(point);
    //             pointArrs.push(point);
    //             markerArrs.push(marker);
    //         }
    //         bm.setCenter(pointArrs[0]);
    //         var line = new BMap.Polyline(pointArrs, {
    //             strokeColor: "black",
    //             strokeWeight: 4,
    //             enableMassClear: false,
    //             strokeOpacity: 0.7
    //         }); //创建弧线对象
    //         bm.addOverlay(line); // 将标注添加到地图中

    //     })
    //     .fail(function() {
    //         console.log("error");
    //     })
    //     .always(function() {
    //         console.log("complete");
    //     });

    // }, 3000);
    //
    </script>
</body>
</html>